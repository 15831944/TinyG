/* TINYG DOCUMENTATION - OVERVIEW AND MAIN FILE 
   Copyright (c) 2010 - 2011 Alden S. Hart Jr.

  Related documents include:
  ----> OVERVIEW 		- Basic understanding of the application (this document)
        USING TINYG	- Connecting to the board, configuration, flashing, etc.
        DEVELOPERS  	- Discussion of program internals, Setup in AVRstudio

	Formatting may be a little weird as it's actually source text for the wiki.
*/

/**** OVERVIEW ****/

This project is based on the NIST RS274NGC_3 Gcode spec.
It was originally forked from grbl in March 2010 and has diverged wildly since then, 
although we are active in grbl development and support grbl with a hradwware solution (grblshield)

The entire TinyG project is Open Source. 

/*---- Supported GCode commands ----
 	G0				Rapid linear motion
	G1				Linear motion at feed rate
	G2, G3			Clockwise / counterclockwise arc at feed rate
	G4				Dwell
	G17, G18, G19	Select plane: XY plane {G17}, XZ plane {G18}, YZ plane {G19}
	G20, G21		Length units: inches {G20}, millimeters {G21}
	G53				Move in absolute coordinates
	G61, G61.1, G64 Set path control mode (group 13)
	G80				Cancel motion mode
	G90, G91		Set distance mode; absolute {G90}, incremental {G91}
	G92				Coordinate System Offsets - limited support provided
	G93, G94		Set feed rate mode: inverse time mode {G93}, 
										units per minute mode {G94}
	M0				Program stop
	M1				Optional program stop
	M2				Program end
	M3, M4			Turn spindle clockwise / counterclockwise
	M5				Stop spindle turning
	M30				Program end (pallet shuttle and reset)
	M60				Program stop (and pallet shuttle)

  Commands omitted for the time being:
	G10	  			Coordinate system data
	G14, G15		Spiral motion
	G28, G30		Return to home (requires parameters)
	G38.2 			Straight probe
	G40, G41, G42	Cutter radius compensation
	G43, G49		Tool length offsets
	G54 - G59.3		Select coordinate system (group 12)
	G81 - G89		Canned cycles
	G92	- G92.3		Coordinate system offsets
	G98, G99		Set canned cycle return level

	M6				Tool change
	M7, M8, M9		Coolant (group8)
	M48, M49		Enable/disable feed and speed override switches (group 9)
	
  Other commands and features intentionally not supported:
	- Multiple coordinate systems
	- Evaluation of expressions
	- Variables (Parameters)
	- Multiple home locations
	- Probing
	- Override control

  FYI: GCode modal groups (from NIST RS274NGC_3 Table 4)

   The modal groups for G codes are:
	group 1 = {G0, G1, G2, G3, G38.2, G80, G81, G82, G83, G84, G85, G86, G87, G88, G89} motion
	group 2 = {G17, G18, G19} plane selection 
	group 3 = {G90, G91} distance mode 
	group 5 = {G93, G94} feed rate mode
	group 6 = {G20, G21} units 
	group 7 = {G40, G41, G42} cutter radius compensation 
	group 8 = {G43, G49} tool length offset 
	group 10 = {G98, G99} return mode in canned cycles 
	group 12 = {G54, G55, G56, G57, G58, G59, G59.1, G59.2, G59.3} coordinate system selection 
	group 13 = {G61, G61.1, G64} path control mode

   The modal groups for M codes are:
	group 4 = {M0, M1, M2, M30, M60} stopping 
	group 6 = {M6} tool change 
	group 7 = {M3, M4, M5} spindle turning 
	group 8 = {M7, M8, M9} coolant (special case: M7 and M8 may be active at the same time) 
	group 9 = {M48, M49} enable/disable feed and speed override switches

   In addition to the above modal groups, there is a group for non-modal G codes:
	group 0 = {G4, G10, G28, G30, G53, G92, G92.1, G92.2, G92.3}	
*/
/*---- Coordinate Systems ----

  TinyG runs a reduced functionality coordinate system from full NIST.
	NIST defines these commands that affect the coordinate system:

  	G10				Coordinate system origin setting
	G54 - G59.3		Select coordinate system (group 12)
	G92	- G92.3		Coordinate system offsets
	G43				Tool offset

	NIST also defines 9 coordinate systems (P1 - P9), plus the machine 
	coordinate system which also defines the machine zero. Our challenge 
	is that we don't know the machine zero unless we go through a 
	lengthy homing cycle - which is not even necessarily supported on 
	all machines. 

  So TinyG implements the following:

	On power up the Gcode interpreter is set to zero (X,Y,Z), which makes 
	the machine zero the current (random) position of the tool. A single 
	coordinate system is provided. G10, G43, and G54 - G59 are not 
	implemented.

	A reduced functionality G92 is available that does the following:
		G92 accepts axis-value pairs for all axes. The value will set that
		axis to the value. For example, to zero a robot you can enter:

			G92 x0 y0 z0 a0 b0 c0	(or any variant of this)

		One or more axes must be provided. Axes that are not provided are 
		not changed.

	A homing cycle is implemented. The homing cycle finds the home switch 
	for each confgured axis, then offsets that axis relative to the 
	location of the switch.
*/
/*---- Length Units ----

	TinyG runs natively in mm units - i.e. the internal system is all done
	in metric. It accepts G21 / G21 to change between inches and mm mode.
	When in inches mode (G20) all inputs are translated to mm internally -
	the machine operator does not see this. Also, all displays are performed
	in inches.

	Configuration settings are interpreted in the active units mode. 

	For example, if the machine is in inches mode (G20) and you set the max 
	feed rate using the command $xfr30 the feed rate will be set to 30 in/min.
	If the machine were in mm mode (G21) it would have been 30 mm/min. 
	It's a good idea to include a G20 or G21 in any script that changes 
	settings.

	The rotary axes (ABC) run natively in degrees mode. See notes on 
	rotary axes for lots more detail.
 */
/*---- Background on Feed and Seek Rates ----

	Feed rates (and seek rates) are done according to NIST RS274NGCv3 
	section 2.1.2.5, "Feed Rate", which reads:

   "A.	For motion involving one or more of the X, Y, and Z axes (with or 
		without simultaneous rotational axis motion), the feed rate means
		length units per minute along the programmed XYZ path, as if the 
		rotational axes were not moving.

	B.	For motion of one rotational axis with X, Y, and Z axes not moving, 
		the feed rate means degrees per minute rotation of the rotational axis.

	C.	For motion of two or three rotational axes with X, Y, and Z axes not 
		moving, the rate is applied as follows. Let dA, dB, and dC be the 
		angles in degrees through which the A, B, and C axes, respectively, 
		must move. Let D = sqrt(dA^2 + dB^2 + dC^2). Conceptually, D is a 
		measure of total angular motion, using the usual Euclidean metric. 

		Let T be the amount of time required to move through D degrees at 
		the current feed rate in degrees per minute. The rotational axes 
		should be moved in coordinated linear motion so that the elapsed 
		time from the start to the end of the motion is T plus any time 
		required for acceleration or deceleration."

	TinyG interprets this to mean that for a combined linear / rotational 
	move (A + 2nd paragraph of C) the feed rate is set as the linear feed 
	rate in prevailing linear units (mm or inch).

	For B and C moves (rotational only) the feed rate is in degrees per minute.

	The above behaviors apply to axes on STANDARD mode. Rotational axes 
	can behave differently in other modes.
 */
